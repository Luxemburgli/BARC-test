{
  "uid": "dbb9e653f59862e8",
  "annotations": {
    "example": "bad",
    "code": "bad"
  },
  "metadata": {
    "source_file": "self_instruct_remix1_fewshot_4_gpt-4o_temp1.00_maxtokens2048_rng2_briefcommon_generated_problems.jsonl"
  },
  "examples": [
    {
      "input": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          9,
          9,
          9,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          9,
          9,
          9,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          0,
          0,
          0,
          4,
          4,
          4,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          0,
          0,
          0,
          4,
          4,
          4,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          4,
          4,
          4,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          4,
          4,
          4,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]
      ],
      "output": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          9,
          9,
          9,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          9,
          9,
          9,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          9,
          9,
          9,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          9,
          9,
          9,
          9,
          9,
          9,
          9,
          0
        ]
      ]
    },
    {
      "input": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          2,
          2,
          0
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          2,
          2,
          0
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          2,
          2,
          0
        ],
        [
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          0,
          7,
          0
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          7,
          7,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]
      ],
      "output": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          7,
          0,
          7
        ],
        [
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          7,
          0,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          7,
          7,
          7,
          7,
          7,
          7,
          7
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]
      ]
    },
    {
      "input": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          1,
          1,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          6,
          1,
          1,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          6,
          6,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]
      ],
      "output": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          6,
          0,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          6,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          0,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          6,
          6,
          0,
          0
        ],
        [
          0,
          6,
          6,
          6,
          6,
          6,
          6,
          0,
          0,
          0
        ]
      ]
    },
    {
      "input": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          8,
          8,
          8,
          6,
          6,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          8,
          8,
          6,
          6,
          0
        ],
        [
          0,
          0,
          0,
          0,
          8,
          8,
          8,
          6,
          6,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]
      ],
      "output": [
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          8,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          8,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          8,
          0,
          0,
          0
        ],
        [
          0,
          0,
          8,
          8,
          8,
          8,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ],
        [
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0,
          0
        ]
      ]
    }
  ],
  "code": "from common import *\n\nimport numpy as np\nfrom typing import *\n\ndef main(input_grid: np.ndarray) -> np.ndarray:\n    # Extracting objects from the grid\n    objects = detect_objects(input_grid, monochromatic=True, connectivity=8, background=Color.BLACK)\n    \n    # Separate the rectangle from the symmetric object\n    sym_object = None\n    rectangle = None\n    for obj in objects:\n        obj_cropped = crop(obj, background=Color.BLACK)\n        if obj_cropped.shape[0] * obj_cropped.shape[1] == np.sum(obj != Color.BLACK):\n            # A fully filled object is the rectangle\n            rectangle = obj\n        else:\n            # The remaining object is our symmetric object\n            sym_object = obj\n    \n    if sym_object is None or rectangle is None:\n        raise ValueError(\"Input grid does not contain the required objects\")\n\n    rectangle_color = np.unique(crop(rectangle))[0]\n    \n    # Removing the rectangle from the grid\n    rectangle_mask = rectangle != Color.BLACK\n    working_grid = input_grid.copy()\n    working_grid[rectangle_mask] = Color.BLACK\n\n    # Detect symmetry regarding the object ignoring the rectangle\n    mirrors = detect_mirror_symmetry(working_grid, ignore_colors=[rectangle_color])\n    \n    # Apply symmetry to fill the missing parts\n    output_grid = working_grid.copy()\n    for x, y in np.argwhere(working_grid == sym_object[sym_object != Color.BLACK][0]):\n        for mirror in mirrors:\n            nx, ny = mirror.apply(x, y)\n            if working_grid[nx, ny] == Color.BLACK:\n                output_grid[nx, ny] = working_grid[x, y]\n    \n    return output_grid\n\ndef generate_input() -> np.ndarray:\n    # Create a grid\n    n, m = np.random.randint(10, 15), np.random.randint(10, 15)\n    grid = np.zeros((n, m), dtype=int)\n\n    obj_color, rect_color = random.sample(list(Color.NOT_BLACK), 2)\n    \n    # Create a symmetric object\n    sprite_w, sprite_h = np.random.randint(5, n-2), np.random.randint(5, m-2)\n    sprite = random_sprite(sprite_w, sprite_h, density=0.5, symmetry='horizontal', color_palette=[obj_color])\n    spr_x, spr_y = random_free_location_for_sprite(grid, sprite, border_size=1, padding=1)\n\n    blit_sprite(grid, sprite, spr_x, spr_y)\n\n    # Create the rectangle\n    rect_w, rect_h = np.random.randint(2, 5), np.random.randint(2, 5)\n    rect = np.full((rect_w, rect_h), rect_color)\n\n    # Place the rectangle over or near the symmetric object ensuring overlap\n    while True:\n        rect_x, rect_y = np.random.randint(0, n - rect_w), np.random.randint(0, m - rect_h)\n        if collision(object1=grid, object2=rect, x2=rect_x, y2=rect_y, background=Color.BLACK):\n            break\n    blit_sprite(grid, rect, rect_x, rect_y, background=Color.BLACK)\n\n    return grid\n\n# Sample run of the functions"
}